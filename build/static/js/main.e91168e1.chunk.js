(this.webpackJsonpmaterial_auth=this.webpackJsonpmaterial_auth||[]).push([[0],{155:function(e,t,a){e.exports=a(264)},224:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(15),c=a.n(o),i=a(28),l=a(17),s=a(135),u=a(313),m=a(57),p="LOGIN_USER",d=function(e){e?localStorage.setItem("jwt",e.jwt):localStorage.removeItem("jwt")},f=function(){return!!localStorage.getItem("jwt")},h=function(){localStorage.removeItem("jwt")},E={isAuth:f(),error:""},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_USER_SUCCESS":return Object(m.a)({},e,{isAuth:!0});case"LOGIN_USER_FAILED":return Object(m.a)({},e,{error:t.payload,isAuth:!1});case"LOGOUT":return Object(m.a)({},e,{isAuth:!1,error:""});case"RESET_MESSAGE_ERROR":return Object(m.a)({},e,{error:""});default:return Object(m.a)({},e)}},g=Object(l.c)({Auth:b,form:u.a}),v=a(36),O=a.n(v),w=a(38),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,t).then((function(e){if(200===!e.status)throw e.json();return e.json()})).then((function(e){return e})).catch((function(e){throw e}))},y=function(){return{type:"LOGIN_USER_SUCCESS"}},S=function(e){return{type:"LOGIN_USER_FAILED",payload:e}},x=O.a.mark(N),k=O.a.mark(C),_=O.a.mark(I);function N(e){var t,a,n,r,o,c;return O.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,a=t.username,n=t.password,r={body:JSON.stringify({username:a,password:n}),method:"POST",headers:{"Content-Type":"application/json"}},i.prev=2,i.next=5,Object(w.b)(j,"/users/authenticate",r);case 5:return o=i.sent,d(o),i.next=9,Object(w.d)(y());case 9:i.next=24;break;case 11:i.prev=11,i.t0=i.catch(2),i.t1=i.t0.status,i.next=500===i.t1?16:401===i.t1?18:20;break;case 16:return c="Internal Server Error",i.abrupt("break",21);case 18:return c="Invalid credentials",i.abrupt("break",21);case 20:c=i.t0;case 21:return i.next=23,Object(w.d)(S(c));case 23:h();case 24:case"end":return i.stop()}}),x,null,[[2,11]])}function C(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.e)(p,N);case 2:case"end":return e.stop()}}),k)}function I(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([Object(w.c)(C)]);case 2:case"end":return e.stop()}}),_)}var A=I,R=O.a.mark(T);function T(e){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(w.a)([A()]);case 2:case"end":return e.stop()}}),R)}var U=Object(s.a)(),L=[U];a(224);var G=a(47),W=a(44),D=a(4),M=function(e){var t=e.component,a=Object(D.a)(e,["component"]);return r.a.createElement(W.b,Object.assign({},a,{render:function(e){return f()?r.a.createElement(t,e):r.a.createElement(W.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},F=a(301),z=a(300),J=a(131),P=a(298),V=Object(J.a)((function(e){return{root:{width:"100%",marginTop:0,zIndex:1,height:"100%",overflow:"hidden"},paper:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"}}})),B=Object(i.b)((function(e){return{isAuth:e.Auth.isAuth}}),{logout:function(){return{type:"LOGOUT"}}})((function(e){var t=V();return r.a.createElement(P.a,{component:"main",maxWidth:"xs"},!e.isAuth&&r.a.createElement(W.a,{to:"/login"}),r.a.createElement(z.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(F.a,{variant:"contained",color:"secondary",size:"large",onClick:function(){e.logout(),h()}},"\u0412\u044b\u0439\u0442\u0438")))})),q=a(310),H=a(309),X=a(314),Y=a(302),$=a(306),K=a(308),Q=a(134),Z=a.n(Q),ee=a(136),te=function(){return r.a.createElement(ee.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Y.a,{color:"inherit",href:"#"},"\u0412\u0430\u0448 \u0441\u0430\u0439\u0442")," ",(new Date).getFullYear(),".")},ae=a(307),ne=a(303),re=a(311),oe=function(e){var t=e.meta,a=e.label,n=e.input,o=e.variant,c=e.margin,i=Object(D.a)(e,["meta","label","input","variant","margin"]),l=Boolean(t.touched&&t.error);return r.a.createElement("div",null,r.a.createElement(ae.a,Object.assign({helperText:l&&t.error,error:l,label:a,placeholder:a,variant:o,margin:c},n,i)))},ce=function(e){var t=e.input,a=e.label,n=e.name,o=e.color;return r.a.createElement("div",null,r.a.createElement(ne.a,{control:r.a.createElement(re.a,{checked:!!t.value,onChange:t.onChange}),label:a,name:n,color:o}))},ie=function(e){return e?void 0:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},le=a(5),se=a(132),ue=a.n(se),me=a(133),pe=a.n(me),de=a(304),fe=a(305),he=a(315),Ee=Object(J.a)((function(e){return{error:{backgroundColor:e.palette.error.dark},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}}));function be(e){var t=Ee(),a=e.className,n=e.message,o=e.onClose,c=e.variant,i=Object(D.a)(e,["className","message","onClose","variant"]);return r.a.createElement(fe.a,Object.assign({className:Object(le.a)(t[c],a),"aria-describedby":"client-snackbar",message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(ue.a,{className:Object(le.a)(t.icon,t.iconVariant)}),n),action:[r.a.createElement(de.a,{key:"close","aria-label":"close",color:"inherit",onClick:o},r.a.createElement(pe.a,{className:t.icon}))]},i))}var ge=Object(J.a)((function(e){return{margin:{margin:e.spacing(1)}}}));var ve=Object(i.b)((function(e){return{message:e.Auth.error}}),(function(e){return{resetMessage:function(){e({type:"RESET_MESSAGE_ERROR"})}}}))((function(e){var t=ge(),a=!1;e.message&&(a=!0);var n=function(t,n){"clickaway"!==n&&(e.resetMessage(),a=!1)};return r.a.createElement("div",null,r.a.createElement(he.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:a,autoHideDuration:2e3,onClose:n},r.a.createElement(be,{onClose:n,variant:"error",className:t.margin,message:e.message})))})),Oe=Object(J.a)((function(e){return{paper:{marginTop:e.spacing(20),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2),textTransform:"none"}}})),we=Object(H.a)({form:"authForm",initialValues:{email:"test",password:"test"}})((function(e){var t=Oe(),a=e.handleSubmit;return r.a.createElement(P.a,{component:"main",maxWidth:"xs"},r.a.createElement(z.a,null),r.a.createElement("div",{className:t.paper},r.a.createElement(X.a,{className:t.avatar},r.a.createElement(Z.a,null)),r.a.createElement(ee.a,{component:"h1",variant:"h5"},"\u0412\u0445\u043e\u0434 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("form",{className:t.form,onSubmit:a},r.a.createElement(q.a,{component:oe,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"\u041f\u043e\u0447\u0442\u0430",name:"email",autoComplete:"email",autoFocus:!0,validate:[ie]}),r.a.createElement(q.a,{component:oe,variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",id:"password",autoComplete:"current-password",validate:[ie]}),r.a.createElement(q.a,{component:ce,name:"rememberMe",label:"\u0417\u0430\u043f\u043e\u043c\u043d\u0438\u0442\u044c \u043c\u0435\u043d\u044f",color:"primary"}),r.a.createElement(F.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement($.a,{container:!0},r.a.createElement($.a,{item:!0,xs:!0},r.a.createElement(Y.a,{href:"#",variant:"body2"},"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?")),r.a.createElement($.a,{item:!0},r.a.createElement(Y.a,{href:"#",variant:"body2"},"\u0415\u0449\u0435 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430? \u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"))),r.a.createElement(ve,null))),r.a.createElement(K.a,{mt:8},r.a.createElement(te,null)))})),je=[{path:"/",exact:!0,name:"Home",component:B,route:M},{path:"/login",exact:!0,name:"Login",component:Object(i.b)((function(e){return{isAuth:e.Auth.isAuth}}),{loginUser:function(e,t){return{type:p,payload:{username:e,password:t}}}})((function(e){return e.isAuth?r.a.createElement(W.a,{to:"/"}):r.a.createElement(we,{onSubmit:function(t){e.loginUser(t.email,t.password,t.rememberMe)}})})),route:W.b}],ye=function(){return r.a.createElement(G.a,null,r.a.createElement(W.d,null,je.map((function(e,t){return r.a.createElement(e.route,{key:t,path:e.path,exact:e.exact,component:e.component})}))))};!function(){var e=[{username:"test",password:"test"}],t=window.fetch;window.fetch=function(a,n){return new Promise((function(r,o){setTimeout((function(){if(a.endsWith("/users/authenticate")&&"POST"===n.method){var c=JSON.parse(n.body);if(e.filter((function(e){return e.username===c.username&&e.password===c.password})).length){var i={jwt:"86"};r({ok:!0,json:function(){return i}})}else o("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c!")}else t(a,n).then((function(e){return r(e)}))}),500)}))}}();var Se=function(){return r.a.createElement(ye,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(i.a,{store:function(e){var t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,a=Object(l.e)(g,e,t(l.a.apply(void 0,L)));return U.run(T),a}()},r.a.createElement(Se,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[155,1,2]]]);
//# sourceMappingURL=main.e91168e1.chunk.js.map